<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Establishment Dashboard</title>
  <link rel="stylesheet" href="{% static 'css/navigation.css' %}">
  <style>
      :root {
          /* Brand Colors */
          --primary-color: #875a34;    /* Main brand color */
          --primary-light: #e99c59;   /* Lighter version for accents */
          --primary-dark: #6d4827;    /* Darker version for hover states */
          --secondary-color: #8c6e5d; /* Secondary brand color */
          
          /* Status Colors */
          --success-color: #34a853;   /* Green for success states */
          --warning-color: #fbbc05;   /* Yellow for warnings */
          --error-color: #ea4335;     /* Red for errors */
          --info-color: #4285f4;      /* Blue for information */
          
          /* Neutral Colors */
          --bg-color: #f4f7fc;        /* Light background */
          --text-dark: #333;          /* Dark text */
          --text-medium: #666;        /* Medium text */
          --text-light: #9e9e9e;      /* Light text */
          --white: #fff;              /* White */
      }
      
      body { 
          font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; 
          background-color: var(--bg-color); 
          margin: 0; 
          padding: 20px; 
          color: var(--text-dark);
      }
      .container { 
          max-width: 800px; 
          margin: auto; 
          background: var(--white); 
          padding: 30px; 
          border-radius: 8px; 
          box-shadow: 0 2px 6px rgba(0,0,0,0.1); 
      }
      h1 { color: var(--text-dark); }
      .button {
          background-color: var(--primary-color);
          color: white;
          padding: 10px 20px;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          border-radius: 5px;
          border: none;
          cursor: pointer;
          margin-top: 20px;
          margin-right: 10px;
      }
      .button:hover {
          background-color: var(--primary-dark);
      }
      .logout-button {
          background-color: var(--error-color);
      }
      .dashboard-stats {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 20px;
          margin-top: 30px;
      }
      .stat-card {
          background: var(--white);
          border-radius: 8px;
          padding: 20px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          text-align: center;
      }
      .stat-number {
          font-size: 28px;
          font-weight: bold;
          color: var(--primary-color);
          margin: 10px 0;
      }
      .stat-label {
          font-size: 14px;
          color: var(--text-medium);
      }
      .action-buttons {
          margin-top: 30px;
          display: flex;
          flex-wrap: wrap;
          gap: 15px;
      }
      
      /* Room listing styles */
      .room-section {
          margin-top: 30px;
      }
      .room-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
          gap: 15px;
          margin-top: 15px;
      }
      .room-card {
          background: #f8f9fa;
          border-radius: 8px;
          padding: 15px;
          box-shadow: 0 1px 3px rgba(0,0,0,0.1);
          border-left: 4px solid var(--success-color);
      }
      .room-name {
          font-weight: bold;
          margin-bottom: 5px;
      }
      .room-status {
          color: var(--success-color);
          font-size: 14px;
      }
      .room-capacity {
          margin-top: 10px;
          font-size: 14px;
          color: var(--text-medium);
      }
      .no-rooms {
          color: var(--text-medium);
          font-style: italic;
          margin-top: 15px;
      }
  </style>
</head>
<body>
  <div class="container">
      <h1>Welcome to Establishment Dashboard</h1>
      <p>Logged in as: {{ company_name }}</p>
      
      <div class="dashboard-stats">
          <div class="stat-card">
              <div class="stat-label">Monthly Submissions</div>
              <div class="stat-number">{{ submissions_count|default:"0" }}</div>
          </div>
          <div class="stat-card">
              <div class="stat-label">Pending Forms</div>
              <div class="stat-number">{{ pending_forms|default:"0" }}</div>
          </div>
          <div class="stat-card">
              <div class="stat-label">Completed Forms</div>
              <div class="stat-number">{{ completed_forms|default:"0" }}</div>
          </div>
      </div>
      
      <div class="action-buttons">
          <a href="/accom_app/other-estab/create/" class="button">Create Monthly Summary</a>
          <a href="#" class="button">View Submissions</a>
          <a href="{% url 'admin_app:admin_logout' %}" class="button logout-button">Logout</a>
      </div>
      
      {% if is_hotel %}
      <!-- Available Rooms Section (Only for Hotel accounts) -->
      <div class="room-section">
          <h2>Available Rooms</h2>
          {% if available_rooms %}
              <div class="room-grid">
                  {% for room in available_rooms %}
                      <div class="room-card">
                          <div class="room-name">{{ room.room_name }}</div>
                          <div class="room-status">{{ room.get_status_display }}</div>
                          <div class="room-capacity">Capacity: {{ room.person_limit }} | Available: {{ room.current_availability }}</div>
                      </div>
                  {% endfor %}
              </div>
          {% else %}
              <p class="no-rooms">No available rooms found.</p>
          {% endif %}
          
          <div style="margin-top: 20px;">
              <a href="{% url 'accom_app:register_room' %}" class="button">Manage Rooms</a>
          </div>
      </div>
      {% endif %}
      
      <hr style="margin: 30px 0; border: none; border-top: 1px solid #eee;">
      
      <div>
          <h2>Recent Activities</h2>
          {% if recent_activities %}
              <ul style="list-style-type: none; padding: 0;">
                  {% for activity in recent_activities %}
                      <li style="padding: 10px; border-bottom: 1px solid #f0f0f0;">
                          {{ activity.timestamp|date:"M d, Y" }} - {{ activity.description }}
                      </li>
                  {% endfor %}
              </ul>
          {% else %}
              <p>No recent activities found.</p>
          {% endif %}
      </div>
  </div>
</body>
</html> 